server {
  listen 80; # http on port 80
  listen 443 ssl; # https on port 443

  # https configuration
  ssl on;
  ssl_certificate /config/keys/cert.crt;
  ssl_certificate_key /config/keys/cert.key;

  # your server's url(s)
  server_name _;

  # the folder p of your FreshRSS installation
  root /config/www/freshrss/p/;

  index index.php index.html index.htm;

  # nginx log files
 #  access_log /var/log/nginx/rss.access.log;
 #  error_log /var/log/nginx/rss.error.log;

  # php files handling
  # this regex is mandatory because of the API
  location ~ ^.+?\.php(/.*)?$ {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_split_path_info ^(.+\.php)(/.*)$;
    # By default, the variable PATH_INFO is not set under PHP-FPM
    # But FreshRSS API greader.php need it. If you have a "Bad Request" error, double check this var !
    fastcgi_param PATH_INFO $fastcgi_path_info;
    include /etc/nginx/fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
  }

  location / {
    try_files $uri $uri/ index.php;
  }
}
